# vim: set ft=zsh:

##
# Returns the file path associated with an auto-loadable shu function.
#
# The specified function will be auto-loaded if necessary.
#
# @todo Support multiple operands.
#
# @module meta
#
# @param $1 The shu function name. Must be a shu function.
#
# @return 0 if file path was found, >0 otherwise.

local fnpath

[[ ${1:-} == -- ]] && shift

(( $# < 1 )) && shu::panic 'Too few arguments'
(( $# > 1 )) && shu::panic 'Too many arguments'

[[ $1 == shu:*:* ]] || shu::panic 'Not a shu function'

# Load the function if we need to
autoload +X -Uz $1 &> /dev/null

fnpath=${"$( whence -v $1 )"#* is a shell function from }

[[ $fnpath == /* ]] || return 1
print -r -- $fnpath
return $?
